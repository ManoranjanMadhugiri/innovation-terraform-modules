{
  "Constraints":{
    "MinCapacity":2,
    "MaxCapacity":10
},
"Rules":[
    {
        "Action":{
            "SimpleScalingPolicyConfiguration":{
                "ScalingAdjustment":2,
                "CoolDown":300,
                "AdjustmentType":"CHANGE_IN_CAPACITY"
            }
        },
        "Description":"",
        "Trigger":{
            "CloudWatchAlarmDefinition":{
                "MetricName":"AppsPending",
                "ComparisonOperator":"GREATER_THAN_OR_EQUAL",
                "Statistic":"AVERAGE",
                "Period":300,
                "Dimensions":[
                    {
                        "Value":"${aws_emr_cluster.emr_cluster.id}",
                        "Key":"JobFlowId"
                    }
                ],
                "EvaluationPeriods":1,
                "Unit":"COUNT",
                "Namespace":"AWS/ElasticMapReduce",
                "Threshold":2.0
            }
        },
        "Name":"AppsPending"
    },
    {
        "Action":{
            "SimpleScalingPolicyConfiguration":{
                "ScalingAdjustment":-2,
                "CoolDown":300,
                "AdjustmentType":"CHANGE_IN_CAPACITY"
            }
        },
        "Description":"",
        "Trigger":{
            "CloudWatchAlarmDefinition":{
                "MetricName":"IsIdle",
                "ComparisonOperator":"GREATER_THAN_OR_EQUAL",
                "Statistic":"AVERAGE",
                "Period":300,
                "Dimensions":[
                    {
                        "Value":"${aws_emr_cluster.emr_cluster.id}",
                        "Key":"JobFlowId"
                    }
                ],
                "EvaluationPeriods":1,
                "Unit":"NONE",
                "Namespace":"AWS/ElasticMapReduce",
                "Threshold":1.0
            }
        },
        "Name":"isIdle?"
    }

]

}
